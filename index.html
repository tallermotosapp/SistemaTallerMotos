<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Taller</title>
    <link rel="stylesheet" href="css/estilos.css">
</head>
<body>

<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

const firebaseConfig = {
  apiKey: "AIzaSyCQNql_3npQHhkf3TKqk0jdHNCotwqyFg8",
  authDomain: "tallermotosliz.firebaseapp.com",
  projectId: "tallermotosliz",
  databaseURL:"https://tallermotosliz-default-rtdb.firebaseio.com",
  storageBucket: "tallermotosliz.firebasestorage.app",
  messagingSenderId: "536042405456",
  appId: "1:536042405456:web:6ac1e8251d0685f4735b55"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// Mostrar una pantalla de ‚Äúcargando‚Ä¶‚Äù mientras Firebase decide
document.body.innerHTML = '<p style="color:black; font-size:1.2rem; text-align:center; margin-top:40px;">Cargando...</p>';

// Esperar a Firebase auth antes de continuar
onAuthStateChanged(auth, (user) => {
    if (!user) {
        // Si NO hay usuario autenticado ‚Üí mandamos al login
        window.location.replace('login.html');
    } else {
        // Si s√≠ hay usuario ‚Üí renderizamos el contenido real
        document.body.innerHTML = `
            <div class="menu-container">
                <h1>Bienvenido al Sistema</h1>
                <a href="clientes.html" class="menu-option">üè≠ M√≥dulo de Taller</a>
                <a href="venta.html" class="menu-option">üõí M√≥dulo de Venta</a>
                <br><button class="logout-btn" onclick="logout()">Cerrar sesi√≥n</button>
            </div>
        `;
        // A√±adir logout
        window.logout = function () {
            auth.signOut().then(() => {
                window.location.replace('login.html');
            });
        };
    }
});
</script>

<style>
.menu-container { text-align: center; padding: 50px; }
.menu-option { display:inline-block; padding:20px 30px; margin:10px; background:#fff; border-radius:10px; text-decoration:none; color:#3E2723; }
.logout-btn { margin-top:20px; padding:10px 20px; background:#e53935; color:#fff; border:none; border-radius:8px; cursor:pointer; }
</style>

</body>
</html>
